{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const BASE_URL = \"https://pixabay.com/api/\";\n\nexport const API_KEY = \"46069437-f48122ef32c6bd1c27031b929\";\n\nimport axios from 'axios';\n\nexport async function fetchPixabay(searchQuery, page = 1) {\n    const URL = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(searchQuery)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n\n    try {\n        const response = await axios.get(URL);\n        return response.data;\n    } catch (error) {\n        throw new Error(\"Sorry, there are no images matching your search query. Please try again!\");\n    }\n  }","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 200,\n});\n\nexport function createMarkup({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `\n    <div class=\"card\">\n      <div class=\"card-image\">\n        <a href=\"${largeImageURL}\" class=\"gallery-item-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n      </div>\n      <div class=\"card-body\">\n      <p class=\"card-text\">\n        <span class=\"card-text-label\">Likes: </span>\n        <span class=\"card-text-value\">${likes}</span>\n      </p>\n      <p class=\"card-text\">\n        <span class=\"card-text-label\">Comments: </span>\n        <span class=\"card-text-value\">${comments}</span>\n      </p>\n      <p class=\"card-text\">\n        <span class=\"card-text-label\">Views: </span>\n        <span class=\"card-text-value\">${views}</span>\n      </p>\n      <p class=\"card-text\">\n        <span class=\"card-text-label\">Downloads: </span>\n        <span class=\"card-text-value\">${downloads}</span>\n      </p>\n    </div>\n    </div>`;\n}\n\nexport function renderImages(images, container, append = false) {\n    const imagesMarkup = images.map(createMarkup).join(\"\");\n  \n    if (append) {\n      container.insertAdjacentHTML(\"beforeend\", imagesMarkup); \n    } else {\n      container.innerHTML = imagesMarkup; \n    }\n  \n    lightbox.refresh(); \n  }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchPixabay } from \"./js/pixabay-api.js\";\nimport { renderImages } from \"./js/render-functions.js\";\n\nlet page = 1; \nlet query = null; \nlet totalHits = 0; \n\nconst refs = {\n  form: document.querySelector(\".form\"),\n  gallery: document.querySelector(\".gallery\"),\n  loader: document.querySelector(\".loader\"),\n  loadButton: document.querySelector(\".load-button\"), \n};\n\nrefs.form.addEventListener(\"submit\", onFormSubmit);\nrefs.loadButton.addEventListener(\"click\", onLoadButtonClick);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  query = event.currentTarget.elements.query.value.trim();\n\n  if (query === \"\") {\n    iziToast.show({\n      title: 'Oops',\n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n      color: \"#ef4040\",\n      position: \"bottomCenter\"\n    });\n    return;\n  }\n\n  page = 1;\n  refs.gallery.innerHTML = \"\";\n  refs.loadButton.classList.add(\"hidden\"); \n  showLoader();\n\n  try {\n    const data = await fetchPixabay(query, page);\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        title: 'No results',\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        color: \"#ef4040\",\n        position: \"bottomCenter\"\n      });\n    } else {\n      totalHits = data.totalHits; \n      renderImages(data.hits, refs.gallery);\n\n      if (totalHits > page * 15) {\n        refs.loadButton.classList.remove(\"hidden\"); \n      }\n    }\n\n  } catch (error) { \n    iziToast.show({\n      title: 'Error',\n      message: \"Something went wrong. Please try again later.\",\n      color: \"#ef4040\",\n      position: \"bottomCenter\"\n    });\n  } finally {\n    hideLoader();\n    refs.form.reset(); \n  }\n}\n\nasync function onLoadButtonClick(event) {\n  page += 1; \n  showLoader();\n\n  try {\n    const data = await fetchPixabay(query, page);\n    \n    renderImages(data.hits, refs.gallery, true); \n\n    scrollCollection(); \n\n    if (totalHits <= page * 15) {\n      refs.loadButton.classList.add(\"hidden\");\n      iziToast.show({\n        title: 'Error',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        color: \"#ef4040\",\n        position: \"bottomCenter\"\n      });\n    }\n\n  } catch (error) {\n    iziToast.show({\n      title: 'Error',\n      message: \"Something went wrong. Please try again later.\",\n      color: \"#ef4040\",\n      position: \"bottomCenter\"\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction showLoader() {\n    refs.loader.classList.remove(\"hidden\");\n}\n  \nfunction hideLoader() {\n    refs.loader.classList.add(\"hidden\");\n}\n\nfunction scrollCollection() {\n    const lastElementChild = refs.gallery.lastElementChild\n    const imageHeight = lastElementChild.getBoundingClientRect().height; \n    window.scrollBy({\n        top: imageHeight * 2,\n        left: 0,\n        behavior: \"smooth\" \n  });\n}"],"names":["BASE_URL","API_KEY","fetchPixabay","searchQuery","page","URL","axios","lightbox","SimpleLightbox","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImages","images","container","append","imagesMarkup","query","totalHits","refs","onFormSubmit","onLoadButtonClick","event","iziToast","showLoader","data","hideLoader","scrollCollection","imageHeight"],"mappings":"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"}